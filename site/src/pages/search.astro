---
import Layout from "../layouts/Layout.astro";
---
<Layout title="Search â€” David Lisk">
  <div class="prose prose-neutral dark:prose-invert max-w-none">
    <h1>Search</h1>
    <div id="search"></div>
  </div>
</Layout>

<script is:inline>
  // Load Pagefind UI dynamically on client side
  if (typeof window !== 'undefined') {
    // Add CSS
    const link = document.createElement('link');
    link.rel = 'stylesheet';
    link.href = '/pagefind/pagefind-ui.css';
    document.head.appendChild(link);

    // Load and initialize Pagefind UI
    import('/pagefind/pagefind-ui.js')
      .then(module => {
        new module.PagefindUI({
          element: "#search",
          showSubResults: true,
          showImages: false
        });
      })
      .catch(err => {
        console.log('Pagefind not yet available. Run the build to generate search index.');
        document.getElementById('search').innerHTML = '<p class="text-muted">Search index is being generated...</p>';
      });
  }
</script>
