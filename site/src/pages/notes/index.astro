---
import Layout from "../../layouts/Layout.astro";
import { getCollection } from 'astro:content';

const notes = (await getCollection('notes'))
  .filter(n => !n.data.draft)
  .sort((a,b) => {
    const dateA = a.data.updated || '';
    const dateB = b.data.updated || '';
    return dateB.localeCompare(dateA);
  });
---
<Layout title="Notes â€” David Lisk">
  <div class="prose prose-neutral dark:prose-invert max-w-none">
    <h1>Notes</h1>
    <p class="text-muted">Short, evolving thoughts and links.</p>

    {notes.length === 0 ? (
      <p class="text-muted italic">No notes yet. Check back soon!</p>
    ) : (
      <ul class="space-y-4">
        {notes.map(n => (
          <li class="list-none">
            <a href={`/notes/${n.slug}`} class="text-lg font-serif hover:text-accent transition-colors">{n.data.title}</a>
            {n.data.summary && <p class="text-muted text-sm mt-1">{n.data.summary}</p>}
          </li>
        ))}
      </ul>
    )}
  </div>
</Layout>
