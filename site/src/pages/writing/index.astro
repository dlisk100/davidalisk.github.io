---
import Layout from "../../layouts/Layout.astro";
import { getCollection } from 'astro:content';

const posts = (await getCollection('writing'))
  .filter(p => !p.data.draft)
  .sort((a,b) => {
    const dateA = a.data.updated || '';
    const dateB = b.data.updated || '';
    return dateB.localeCompare(dateA);
  });
---
<Layout title="Writing â€” David Lisk">
  <div class="prose prose-neutral dark:prose-invert max-w-none">
    <h1>Writing</h1>
    <ul class="space-y-4">
      {posts.map(p => (
        <li class="list-none">
          <a href={`/writing/${p.slug}`} class="text-lg font-serif hover:text-accent transition-colors">{p.data.title}</a>
          {p.data.summary && <p class="text-muted text-sm mt-1">{p.data.summary}</p>}
          {p.data.updated && <p class="text-xs text-muted mt-1">{p.data.updated}</p>}
        </li>
      ))}
    </ul>
  </div>
</Layout>
